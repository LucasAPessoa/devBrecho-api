// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider          = "postgresql"
    url               = env("DATABASE_URL")
    shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model Setor {
    setorId Int     @id @default(autoincrement())
    nome    String
    bolsas  Bolsa[]
}

model Fornecedora {
    fornecedoraId Int     @id @default(autoincrement())
    codigo        String  @unique
    nome          String
    telefone      String?
    bolsas        Bolsa[]
}

model Bolsa {
    bolsaId                      Int       @id @default(autoincrement())
    dataDeEntrada                DateTime  @default(now())
    dataMensagem                 DateTime?
    quantidadeDePecasSemCadastro Int
    observacoes                  String?
    statusDevolvida              Boolean?  @default(false)
    statusDoada                  Boolean?  @default(false)

    deletedAt DateTime?

    fornecedora   Fornecedora @relation(fields: [fornecedoraId], references: [fornecedoraId])
    fornecedoraId Int

    setor   Setor @relation(fields: [setorId], references: [setorId])
    setorId Int

    pecasCadastradas PecaCadastrada[]
}

model PecaCadastrada {
    pecaCadastradaId Int    @id @default(autoincrement())
    codigoDaPeca     String

    bolsa   Bolsa @relation(fields: [bolsaId], references: [bolsaId])
    bolsaId Int
}
